# Tasks: Meetings Archive Page & Detail Pages

## Relevant Files

- `scripts/migrate-meetings.py` - Python script to parse WordPress XML export and generate Markdown meeting files
- `content/meetings/` - Directory containing 24 auto-generated Markdown meeting files with frontmatter
- `content/meetings/*.md` - Individual meeting Markdown files (auto-generated by migration script)
- `pages/meetings/index.vue` - Meetings archive listing page with responsive grid layout
- `pages/meetings/[id].vue` - Meeting detail page with program information, topics, speakers, archive materials
- `components/MeetingCard.vue` - Reusable meeting card component (similar structure to BlogCard.vue)
- `composables/useMeetingPost.js` - Meeting-specific utilities (normalize posts, format data, get URLs)
- `utils/meetingHelpers.js` - Helper functions for meeting data parsing and processing
- `migration-report.md` - Migration report generated by migration script (shows stats, errors, file mapping)
- `public/images/meetings/` - Directory for featured meeting images (created by migration script)
- `public/images/speakers/` - Directory for speaker headshots (created by migration script)
- `public/documents/meetings/` - Directory for PDF materials and slides (created by migration script)

### Notes

- The existing `BlogCard.vue` and `pages/blog/index.vue` serve as architectural templates for meeting components
- The `useBlogPost.js` composable pattern will be adapted for `useMeetingPost.js` to maintain consistency
- All migrations follow existing Nuxt Content v3 patterns using `queryCollection()` API
- Asset organization leverages existing image handling with `useImageExists` composable
- Styling uses TailwindCSS matching the existing design system in the project

---

## Tasks

- [x] 1.0 Build WordPress XML Migration Script (v1 - Initial)
  - [x] 1.1 Create `scripts/migrate-meetings.py` with XML parsing setup

- [x] 1.0 Enhanced WordPress XML Migration Script (v2 - Corrective)
  - [x] 1.1 Create `scripts/migrate-meetings-v2.py` with shortcode parsing
    - Import required libraries: `xml.etree.ElementTree`, `shutil`, `os`, `json`
    - Create functions to parse WordPress XML export file
    - Set up logging and error handling
  - [x] 1.2 Extract meeting posts from WordPress XML
    - Filter posts by "ARCHIVE" in title (extracted 102 posts)
    - Extract post metadata: `post_id`, `title`, `post_date_gmt`, `content`, `post_name`
    - Extract featured image attachment URL and attachment relationship
    - Handle missing or malformed data gracefully
  - [x] 1.3 Parse HTML content to extract topics and speakers
    - Parse post content HTML to identify topic sections (TOPIC 1, TOPIC 2, etc.)
    - Extract speaker names, titles, and affiliations from HTML
    - Extract key learning points (bullet points/learning objectives)
    - Extract archive material links (PDF, recording URLs)
    - Handle edge cases where data might be missing
  - [x] 1.4 Generate Markdown files with proper frontmatter
    - Create `content/meetings/` directory if it doesn't exist
    - Generate one `.md` file per meeting with matching schema from PRD section 4.3
    - Include all extracted metadata in YAML frontmatter
    - Convert WordPress HTML content to clean Markdown format
    - Use post slug or generate slug from title for filename
    - Validate frontmatter structure before writing
  - [x] 1.5 Organize and copy assets
    - Create `public/images/meetings/` directory
    - Create `public/images/speakers/` directory
    - Create `public/documents/meetings/` directory
    - Copy featured meeting images from `AAII-Migration-assets/uploads/` to `public/images/meetings/`
    - Copy speaker headshots from `AAII-Migration-assets/uploads/` to `public/images/speakers/`
    - Copy PDF materials from `AAII-Migration-assets/uploads/` to `public/documents/meetings/`
    - Update image/PDF paths in generated Markdown frontmatter to match new locations
    - Log any missing or failed file copies
  - [x] 1.6 Generate migration report
    - Create `migration-report.md` with migration summary
    - Report total posts processed (102 posts extracted and migrated)
    - Report any parsing errors or missing data
    - Provide file mapping: WordPress post ID → Markdown filename
    - List any missing images or PDF files
    - Provide asset organization summary
  - [x] 1.7 Validate migration output
    - ✓ Verified all 101 Markdown files created in `content/meetings/`
    - ✓ Spot-checked files for complete and valid frontmatter
    - ✓ Verified image paths (218 meeting images, 16 speaker images)
    - ✓ Verified PDF documents (4 files)
    - ✓ No WordPress shortcodes remaining (100% clean)
    - ✓ All frontmatter structure valid

- [ ] 2.0 Create Meeting Data Utilities & Composables
  - [ ] 2.1 Create `composables/useMeetingPost.js`
    - Create `normalizeMeeting(meeting)` function to flatten meta fields to top level
    - Create `normalizeMeetings(meetings)` to normalize array of meetings
    - Create `getMeetingUrl(meeting)` to get meeting URL (prefer slug over path)
    - Create `formatMeetingDate(dateString)` to format dates in US locale (e.g., "Saturday, September 20, 2025")
    - Create `getTopicNumber(index)` to format topic heading (e.g., "TOPIC 1")
    - Export all functions for use in components
  - [ ] 2.2 Create `utils/meetingHelpers.js`
    - Create `truncateDescription(text, maxLines)` to truncate description with ellipsis (3-4 lines)
    - Create `extractFirstTopic(meeting)` to get first topic for preview
    - Create `hasArchiveMaterials(meeting)` to check if materials exist
    - Create `sortMeetingsByDate(meetings)` to sort by date descending (newest first)
    - Export all helpers for use in components and pages
  - [ ] 2.3 Ensure composable compatibility
    - Follow same patterns as `useBlogPost.js` for consistency
    - Use same date formatting approach as existing project
    - Maintain naming conventions with existing codebase
    - Test composables can be imported and used in Vue components

- [ ] 3.0 Build Meetings Listing Page
  - [ ] 3.1 Create `pages/meetings/index.vue` structure
    - Set up template with container and header section
    - Create heading "All Archived Meeting Presentations"
    - Add subheading "Browse all past presentations and associated PDF materials"
    - Set up main content area and grid layout container
  - [ ] 3.2 Implement data fetching with queryCollection()
    - Use `useAsyncData()` hook to fetch meetings
    - Query collection with path filter: `/meetings%`
    - Sort meetings by date descending (newest first)
    - Normalize meetings using `normalizeMeetings()` composable
    - Add refresh() call on mount if data is empty (hybrid rendering pattern)
  - [ ] 3.3 Create responsive grid layout
    - Implement TailwindCSS grid: `grid-cols-1 md:grid-cols-2 lg:grid-cols-4`
    - Set gap-8 for spacing between cards
    - Ensure responsive: 1 column mobile, 2 columns tablet, 4 columns desktop
  - [ ] 3.4 Display meeting cards
    - Import and use `MeetingCard.vue` component
    - Pass meeting object as prop to each card
    - Show message if no meetings found
    - Verify card count matches expected 24 meetings
  - [ ] 3.5 Add SEO meta tags
    - Use `useSeoMeta()` for page title and description
    - Set og:title and og:description
    - Set twitter:card metadata
    - Example: "All Archived Meeting Presentations - AAIILA"

- [ ] 4.0 Create Meeting Card Component
  - [ ] 4.1 Create `components/MeetingCard.vue` structure
    - Set up article wrapper with base styles
    - Create image container with aspect ratio
    - Create content area with padding
    - Implement "Read more" button section
  - [ ] 4.2 Implement featured image display
    - Display meeting image if exists
    - Use `useImageExists()` composable to verify image exists before displaying
    - Set aspect ratio (matches WordPress: likely 16:9 or similar)
    - Apply hover scale transform on image (subtle zoom effect)
    - Handle missing images gracefully
  - [ ] 4.3 Display card content
    - Show meeting title with hover color change
    - Show description text truncated to 3-4 lines with ellipsis
    - Use existing `line-clamp-3` style pattern from BlogCard
    - Ensure text is readable with proper contrast
  - [ ] 4.4 Style card to match WordPress design
    - Light gray background for card content area (`bg-gray-50` or similar)
    - Image spans full card width at top
    - Red "Read more" button (#FF4444 or similar)
    - Consistent padding and spacing with blog cards
    - Add hover effect: subtle shadow increase or opacity change
    - Dark mode support with appropriate color adjustments
  - [ ] 4.5 Add navigation and interactivity
    - Link title to meeting detail page using `getMeetingUrl()`
    - Link "Read more" button to meeting detail page
    - Ensure all links are working and use correct URL format
    - Verify hover states are smooth and intuitive

- [ ] 5.0 Build Meeting Detail Page & Complete Implementation
  - [ ] 5.1 Create `pages/meetings/[id].vue` structure
    - Set up container and layout
    - Create header section at top
    - Create main content area for program information
    - Create sections for each topic/speaker
    - Create navigation section at bottom
  - [ ] 5.2 Implement header section
    - Fetch meeting by ID using `queryCollection()` with path filter
    - Display meeting date in large text (format: "Saturday, September 20, 2025")
    - Show archive status badge with yellow background and text "THIS IS AN ARCHIVED PRESENTATION FROM THE ABOVE DATE"
    - Add horizontal divider line below header
    - Implement back link or breadcrumb to meetings list
  - [ ] 5.3 Implement program information section
    - Display "PROGRAM INFORMATION" heading (gray, all caps)
    - Display full meeting description/overview from frontmatter
    - Render any body content from Markdown file
  - [ ] 5.4 Implement topics and speakers section
    - Display each topic with heading (e.g., "TOPIC 1", "TOPIC 2")
    - For each topic in `topics` array:
      - Display speaker image (centered, appropriate size - verify with `useImageExists`)
      - Display speaker name in bold
      - Display speaker title/affiliation in smaller text
      - Display topic description
      - Display key learning points as bulleted list with custom color (teal/green)
    - Implement visual separation between topics
  - [ ] 5.5 Implement archive materials section
    - Display "ARCHIVE MATERIALS" button/section if materials exist
    - Create buttons/links for each archive material:
      - PDF documents with file icon
      - Recording links with play icon
    - Use red button color (#FF4444) matching WordPress design
    - Add external link indicators where appropriate
  - [ ] 5.6 Implement previous/next meeting navigation
    - Use `queryCollectionItemSurroundings()` to get surrounding meetings
    - Display "Previous Meeting" link and navigation
    - Display "Next Meeting" link and navigation
    - Handle cases where previous or next meeting doesn't exist
    - Ensure proper sorting (chronological order)
  - [ ] 5.7 Add SEO meta tags
    - Use `useSeoMeta()` for page title (meeting title + "- AAIILA")
    - Set description from meeting description
    - Set og:title, og:description, og:image (use featured image)
    - Set twitter:card metadata
  - [ ] 5.8 Test with multiple meetings
    - Test with 5+ different meeting files
    - Verify all content displays correctly
    - Test responsive design on mobile, tablet, desktop
    - Verify image loading and PDF links work
    - Check previous/next navigation at boundaries (first and last meeting)
  - [ ] 5.9 Verify design matches WordPress reference
    - Compare listing page layout with provided WordPress screenshot
    - Compare detail page layout with provided WordPress screenshot
    - Verify colors match (red buttons, yellow badge, etc.)
    - Verify typography and spacing matches
    - Verify responsive behavior on all breakpoints
  - [ ] 5.10 Perform final validation and refinement
    - Test all internal links work correctly
    - Verify no broken images or PDF links
    - Test dark mode support
    - Check performance with 24 meetings
    - Verify no console errors
    - Test navigation flows (listing → detail → next/previous)
    - Final visual comparison with WordPress design
